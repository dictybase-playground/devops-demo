import { Image, Split, themes } from "mdx-deck"
import prPageNoChecks from "./images/pr-page-no-checks.png"
import prPageChecks from "./images/pr-page-with-checks.png"
import prFail from "./images/pr-fail.png"
import automerge from "./images/automerge-commits.png"
import prDeploy from "./images/pr-deploy.png"
import issueDeploy from "./images/issue-deploy.png"

export const theme = themes.code

# DevOps at dictyBase

---

### Automate all the things!

<Image
  src="https://media0.giphy.com/media/1nR6fu93A17vWZbO9c/giphy.gif?cid=ecf05e471ltadedv5lb2jagb6c5ar91zqbxt6fbt5xweqfu5&rid=giphy.gif"
  height={450}
  width={710}
/>

---

## DevOps Process

1. Create Pull Request
2. Code Quality Control and Reports
3. Merge Code and Deploy

---

## Background Concepts

- Git branching model

<Split style={{ textAlign: "left", height: "auto" }}>
<center style={{ marginRight: "100px"}}>
  <Image
    src="https://nvie.com/img/main-branches@2x.png"
    height={402}
    width={267}
  />
</center>


<center>
  <Image src="https://nvie.com/img/fb@2x.png" height={357} width={133} />
</center>

</Split>


---

## Background Concepts

- Pull requests

<img src={prPageNoChecks} style={{ height: "60%" }} />

---

## Code Quality Control

All of these run automatically:

- Linter
- Unit tests (with code coverage)
- Build
- Visual testing (frontend)
- Performance testing (frontend)
- Code quality control checks
- Security scanning

---

## Status Checks

<img src={prPageChecks} style={{ height: "70%" }} />

---

## Failed Checks

<Image src={prFail} height={304} width={600} />

---

## Automated Merging

<Image src={automerge} height={177} width={600} />

---

# Deployment

- Automated: staging and prod
- Interactive: development

---

## Interactive Deployment

- /deploy command (ChatOps)

---

## /deploy

Deployments are triggered from comments inside:

- Pull requests
- Issues

---

## Pull request example

- `/deploy cluster=erickube`
- `/deploy cluster=erickube commit=abc`

<Image src={prDeploy} width={600} height={146} />

---

## Issue example

- `/deploy cluster=siddkube branch=develop`
- `/deploy cluster=siddkube commit=xyz`

<Image src={issueDeploy} width={600} height={92} />

---

## The End

<Image
  src="https://media0.giphy.com/media/4TtTVTmBoXp8txRU0C/giphy.gif?cid=ecf05e471ltadedv5lb2jagb6c5ar91zqbxt6fbt5xweqfu5&rid=giphy.gif"
  height={379}
  width={710}
/>
